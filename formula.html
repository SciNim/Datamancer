<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--  This file is generated by Nim. -->
<html xmlns="https://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>datamancer/formula</title>

<!-- Favicon -->
<link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>
<link rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH4QQQEwksSS9ZWwAAAk1JREFUWMPtll2ITVEUx39nn/O7Y5qR8f05wtCUUr6ZIS++8pEnkZInPImneaCQ5METNdOkeFBKUhMPRIkHKfEuUZSUlGlKPN2TrgfncpvmnntnmlEyq1Z7t89/rf9a6+y99oZxGZf/XeIq61EdtgKXgdXA0xrYAvBjOIF1AI9zvjcC74BSpndrJPkBWDScTF8Aa4E3wDlgHbASaANmVqlcCnwHvgDvgVfAJ+AikAAvgfVZwLnSVZHZaOuKoQi3ZOMi4NkYkpe1p4J7A8BpYAD49hfIy/oqG0+hLomiKP2L5L+1ubn5115S+3OAn4EnwBlgMzCjyt6ZAnQCJ4A7wOs88iRJHvw50HoujuPBoCKwHWiosy8MdfZnAdcHk8dxXFJ3VQbQlCTJvRBCGdRbD4M6uc5glpY3eAihpN5S5w12diSEcCCEcKUO4ljdr15T76ur1FDDLIQQ3qv71EdDOe3Kxj3leRXyk+pxdWnFWod6Wt2bY3de3aSuUHcPBVimHs7mK9WrmeOF6lR1o9qnzskh2ar2qm1qizpfXaPeVGdlmGN5pb09qMxz1Xb1kLqgzn1RyH7JUXW52lr5e/Kqi9qpto7V1atuUzfnARrV7jEib1T76gG2qxdGmXyiekkt1GswPTtek0aBfJp6YySGBfWg2tPQ0FAYgf1stUfdmdcjarbYJEniKIq6gY/Aw+zWHAC+p2labGpqiorFYgGYCEzN7oQdQClN07O1/EfDyGgC0ALMBdYAi4FyK+4H3gLPsxfR1zRNi+NP7nH5J+QntnXe5B5mpfQAAAAASUVORK5CYII=">

<!-- Google fonts -->
<link href='https://fonts.googleapis.com/css?family=Lato:400,600,900' rel='stylesheet' type='text/css'/>
<link href='https://fonts.googleapis.com/css?family=Source+Code+Pro:400,500,600' rel='stylesheet' type='text/css'/>

<!-- CSS -->
<link rel="stylesheet" type="text/css" href="nimdoc.out.css">

<!-- JS -->
<script type="text/javascript" src="dochack.js"></script>
</head>
<body>
  <div class="document" id="documentId">
    <div class="container">
      <h1 class="title">datamancer/formula</h1>
      <div class="row">
  <div class="three columns">
    <div class="theme-switch-wrapper">
      <label class="theme-switch" for="checkbox">
        <input type="checkbox" id="checkbox" />
        <div class="slider round"></div>
      </label>
      &nbsp;&nbsp;&nbsp; <em>Dark Mode</em>
    </div>
    <div id="global-links">
      <ul class="simple">
        <li><a href="theindex.html">Index</a></li>
      </ul>
    </div>
    <div id="searchInputDiv">
      Search: <input type="search" id="searchInput" onkeyup="search()"/>
    </div>
    <div>
      Group by:
      <select onchange="groupBy(this.value)">
        <option value="section">Section</option>
        <option value="type">Type</option>
      </select>
    </div>
    <ul class="simple simple-toc" id="toc-list">
  <li>
  <a class="reference reference-toplevel" href="#6" id="56">Imports</a>
</li>
<li>
  <details open>
    <summary><a class="reference reference-toplevel" href="#7" id="57">Types</a></summary>
    <ul class="simple simple-toc-section">
      <li><a class="reference" href="#FormulaMismatchError" title="FormulaMismatchError = object of CatchableError">FormulaMismatchError</a></li>
<li><a class="reference" href="#FormulaNode" title="FormulaNode = object
  name*: string
  case kind*: FormulaKind
  of fkVariable:
      val*: Value

  of fkAssign:
      lhs*: string
      rhs*: Value

  of fkVector:
      colName*: string
      resType*: ColKind
      fnV*: proc (df: DataFrame): Column

  of fkScalar:
      valName*: string
      valKind*: ValueKind
      fnS*: proc (c: DataFrame): Value

  of fkNone:
    nil">FormulaNode</a></li>

    </ul>
  </details>
</li>
<li>
  <details open>
    <summary><a class="reference reference-toplevel" href="#12" id="62">Procs</a></summary>
    <ul class="simple simple-toc-section">
      <ul class="simple nested-toc-section">$
  <li><a class="reference" href="#%24%2CFormulaNode" title="`$`(node: FormulaNode): string">`$`(node: FormulaNode): string</a></li>

</ul>
<ul class="simple nested-toc-section">hash
  <li><a class="reference" href="#hash%2CFormulaNode" title="hash(fn: FormulaNode): Hash">hash(fn: FormulaNode): Hash</a></li>

</ul>
<ul class="simple nested-toc-section">raw
  <li><a class="reference" href="#raw%2CFormulaNode" title="raw(node: FormulaNode): string">raw(node: FormulaNode): string</a></li>

</ul>
<ul class="simple nested-toc-section">toUgly
  <li><a class="reference" href="#toUgly%2Cstring%2CFormulaNode" title="toUgly(result: var string; node: FormulaNode)">toUgly(result: var string; node: FormulaNode)</a></li>

</ul>

    </ul>
  </details>
</li>
<li>
  <details open>
    <summary><a class="reference reference-toplevel" href="#17" id="67">Macros</a></summary>
    <ul class="simple simple-toc-section">
      <ul class="simple nested-toc-section">compileFormulaImpl
  <li><a class="reference" href="#compileFormulaImpl.m%2Cstaticstring%2CstaticFormulaKind" title="compileFormulaImpl(rawName: static string; funcKind: static FormulaKind): untyped">compileFormulaImpl(rawName: static string; funcKind: static FormulaKind): untyped</a></li>

</ul>
<ul class="simple nested-toc-section">fn
  <li><a class="reference" href="#fn.m%2Cuntyped" title="fn(x: untyped): untyped">fn(x: untyped): untyped</a></li>

</ul>
<ul class="simple nested-toc-section">formula
  <li><a class="reference" href="#formula.m%2Cuntyped" title="formula(n: untyped): untyped">formula(n: untyped): untyped</a></li>

</ul>
<ul class="simple nested-toc-section">{}
  <li><a class="reference" href="#%7B%7D.m%2C%2Cuntyped" title="`{}`(x: untyped{ident}; y: untyped): untyped">`{}`(x: untyped{ident}; y: untyped): untyped</a></li>

</ul>

    </ul>
  </details>
</li>
<li>
  <a class="reference reference-toplevel" href="#19" id="69">Exports</a>
</li>

</ul>

  </div>
  <div class="nine columns" id="content">
    <a href="https://github.com/SciNim/datamancer/tree/master/src/datamancer/formula.nim#L1" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/SciNim/datamancer/edit/master/src/datamancer/formula.nim#L1" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

    <div id="tocRoot"></div>
    
    <p class="module-desc"></p>
    <div class="section" id="6">
  <h1><a class="toc-backref" href="#6">Imports</a></h1>
  <dl class="item">
    <a class="reference external" href="value.html">value</a>, <a class="reference external" href="column.html">column</a>, <a class="reference external" href="df_types.html">df_types</a>, <a class="reference external" href="formulaNameMacro.html">formulaNameMacro</a>, <a class="reference external" href="formulaExp.html">formulaExp</a>
  </dl>
</div>
<div class="section" id="7">
  <h1><a class="toc-backref" href="#7">Types</a></h1>
  <dl class="item">
    <div id="FormulaMismatchError">
  <dt><pre><a href="formula.html#FormulaMismatchError"><span class="Identifier">FormulaMismatchError</span></a> <span class="Other">=</span> <span class="Keyword">object</span> <span class="Keyword">of</span> <span class="Identifier">CatchableError</span></pre></dt>
  <dd>
    
    
    <a href="https://github.com/SciNim/datamancer/tree/master/src/datamancer/formula.nim#L36" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/SciNim/datamancer/edit/master/src/datamancer/formula.nim#L36" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>
<div id="FormulaNode">
  <dt><pre><a href="formula.html#FormulaNode"><span class="Identifier">FormulaNode</span></a> <span class="Other">=</span> <span class="Keyword">object</span>
  <span class="Identifier">name</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">string</span>
  <span class="Keyword">case</span> <span class="Identifier">kind</span><span class="Operator">*</span><span class="Other">:</span> <a href="formulaExp.html#FormulaKind"><span class="Identifier">FormulaKind</span></a>
  <span class="Keyword">of</span> <span class="Identifier">fkVariable</span><span class="Other">:</span>
      <span class="Identifier">val</span><span class="Operator">*</span><span class="Other">:</span> <a href="value.html#Value"><span class="Identifier">Value</span></a>

  <span class="Keyword">of</span> <span class="Identifier">fkAssign</span><span class="Other">:</span>
      <span class="Identifier">lhs</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">string</span>
      <span class="Identifier">rhs</span><span class="Operator">*</span><span class="Other">:</span> <a href="value.html#Value"><span class="Identifier">Value</span></a>

  <span class="Keyword">of</span> <span class="Identifier">fkVector</span><span class="Other">:</span>
      <span class="Identifier">colName</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">string</span>
      <span class="Identifier">resType</span><span class="Operator">*</span><span class="Other">:</span> <a href="column.html#ColKind"><span class="Identifier">ColKind</span></a>
      <span class="Identifier">fnV</span><span class="Operator">*</span><span class="Other">:</span> <span class="Keyword">proc</span> <span class="Other">(</span><span class="Identifier">df</span><span class="Other">:</span> <a href="df_types.html#DataFrame"><span class="Identifier">DataFrame</span></a><span class="Other">)</span><span class="Other">:</span> <a href="column.html#Column"><span class="Identifier">Column</span></a>

  <span class="Keyword">of</span> <span class="Identifier">fkScalar</span><span class="Other">:</span>
      <span class="Identifier">valName</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">string</span>
      <span class="Identifier">valKind</span><span class="Operator">*</span><span class="Other">:</span> <a href="value.html#ValueKind"><span class="Identifier">ValueKind</span></a>
      <span class="Identifier">fnS</span><span class="Operator">*</span><span class="Other">:</span> <span class="Keyword">proc</span> <span class="Other">(</span><span class="Identifier">c</span><span class="Other">:</span> <a href="df_types.html#DataFrame"><span class="Identifier">DataFrame</span></a><span class="Other">)</span><span class="Other">:</span> <a href="value.html#Value"><span class="Identifier">Value</span></a>

  <span class="Keyword">of</span> <span class="Identifier">fkNone</span><span class="Other">:</span>
    <span class="Keyword">nil</span>
  </pre></dt>
  <dd>
    
    
    <a href="https://github.com/SciNim/datamancer/tree/master/src/datamancer/formula.nim#L15" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/SciNim/datamancer/edit/master/src/datamancer/formula.nim#L15" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

  </dl>
</div>
<div class="section" id="12">
  <h1><a class="toc-backref" href="#12">Procs</a></h1>
  <dl class="item">
    <div id="$-procs-all">
  <div id="$,FormulaNode">
  <dt><pre><span class="Keyword">proc</span> <a href="#%24%2CFormulaNode"><span class="Identifier">`$`</span></a><span class="Other">(</span><span class="Identifier">node</span><span class="Other">:</span> <a href="formula.html#FormulaNode"><span class="Identifier">FormulaNode</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    Converts <tt class="docutils literal"><span class="pre"><span class="Identifier">node</span></span></tt> to its string representation
    <a href="https://github.com/SciNim/datamancer/tree/master/src/datamancer/formula.nim#L97" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/SciNim/datamancer/edit/master/src/datamancer/formula.nim#L97" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="hash-procs-all">
  <div id="hash,FormulaNode">
  <dt><pre><span class="Keyword">proc</span> <a href="#hash%2CFormulaNode"><span class="Identifier">hash</span></a><span class="Other">(</span><span class="Identifier">fn</span><span class="Other">:</span> <a href="formula.html#FormulaNode"><span class="Identifier">FormulaNode</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">Hash</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">Exception</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">RootEffect</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    
    <a href="https://github.com/SciNim/datamancer/tree/master/src/datamancer/formula.nim#L60" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/SciNim/datamancer/edit/master/src/datamancer/formula.nim#L60" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="raw-procs-all">
  <div id="raw,FormulaNode">
  <dt><pre><span class="Keyword">proc</span> <a href="#raw%2CFormulaNode"><span class="Identifier">raw</span></a><span class="Other">(</span><span class="Identifier">node</span><span class="Other">:</span> <a href="formula.html#FormulaNode"><span class="Identifier">FormulaNode</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    prints the raw stringification of <tt class="docutils literal"><span class="pre"><span class="Identifier">node</span></span></tt>
    <a href="https://github.com/SciNim/datamancer/tree/master/src/datamancer/formula.nim#L77" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/SciNim/datamancer/edit/master/src/datamancer/formula.nim#L77" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="toUgly-procs-all">
  <div id="toUgly,string,FormulaNode">
  <dt><pre><span class="Keyword">proc</span> <a href="#toUgly%2Cstring%2CFormulaNode"><span class="Identifier">toUgly</span></a><span class="Other">(</span><span class="Identifier">result</span><span class="Other">:</span> <span class="Keyword">var</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">node</span><span class="Other">:</span> <a href="formula.html#FormulaNode"><span class="Identifier">FormulaNode</span></a><span class="Other">)</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span>
    <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
  <dd>
    
    This is the formula stringification, which can be used to access the corresponding column of in a DF that corresponds to the formula
    <a href="https://github.com/SciNim/datamancer/tree/master/src/datamancer/formula.nim#L81" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/SciNim/datamancer/edit/master/src/datamancer/formula.nim#L81" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>

  </dl>
</div>
<div class="section" id="17">
  <h1><a class="toc-backref" href="#17">Macros</a></h1>
  <dl class="item">
    <div id="compileFormulaImpl-macros-all">
  <div id="compileFormulaImpl.m,staticstring,staticFormulaKind">
  <dt><pre><span class="Keyword">macro</span> <a href="#compileFormulaImpl.m%2Cstaticstring%2CstaticFormulaKind"><span class="Identifier">compileFormulaImpl</span></a><span class="Other">(</span><span class="Identifier">rawName</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">funcKind</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">FormulaKind</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">untyped</span></pre></dt>
  <dd>
    
    <p>Second stage of formula macro. The typed stage of the macro. It's important that the macro is typed, as otherwise we risk that it is evaluated <tt class="docutils literal"><span class="pre">before</span></tt> the <tt class="docutils literal"><span class="pre"><span class="Identifier">addSymbols</span></span></tt> calls, if we are within a generic procedure. That leads to the CT tables being empty. By making it typed (which we can do, because we store all problematic AST into the CT tables), we force evaluation to the same compilation stage as <tt class="docutils literal"><span class="pre"><span class="Identifier">addSymbols</span></span></tt>.</p>
<p>Extracts the typed symbols from <tt class="docutils literal"><span class="pre"><span class="Identifier">TypedSymbols</span></span></tt> CT table and uses it to determine possible types for column references.</p>

    <a href="https://github.com/SciNim/datamancer/tree/master/src/datamancer/formula.nim#L1027" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/SciNim/datamancer/edit/master/src/datamancer/formula.nim#L1027" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="fn-macros-all">
  <div id="fn.m,untyped">
  <dt><pre><span class="Keyword">macro</span> <a href="#fn.m%2Cuntyped"><span class="Identifier">fn</span></a><span class="Other">(</span><span class="Identifier">x</span><span class="Other">:</span> <span class="Identifier">untyped</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">untyped</span></pre></dt>
  <dd>
    
    
    <a href="https://github.com/SciNim/datamancer/tree/master/src/datamancer/formula.nim#L1320" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/SciNim/datamancer/edit/master/src/datamancer/formula.nim#L1320" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="formula-macros-all">
  <div id="formula.m,untyped">
  <dt><pre><span class="Keyword">macro</span> <a href="#formula.m%2Cuntyped"><span class="Identifier">formula</span></a><span class="Other">(</span><span class="Identifier">n</span><span class="Other">:</span> <span class="Identifier">untyped</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">untyped</span></pre></dt>
  <dd>
    
    
    <a href="https://github.com/SciNim/datamancer/tree/master/src/datamancer/formula.nim#L1325" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/SciNim/datamancer/edit/master/src/datamancer/formula.nim#L1325" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>
<div id="{}-macros-all">
  <div id="{}.m,,untyped">
  <dt><pre><span class="Keyword">macro</span> <a href="#%7B%7D.m%2C%2Cuntyped"><span class="Identifier">`{}`</span></a><span class="Other">(</span><span class="Identifier">x</span><span class="Other">:</span> <span class="Identifier">untyped</span><span class="Other">{</span><span class="Identifier">ident</span><span class="Other">}</span><span class="Other">;</span> <span class="Identifier">y</span><span class="Other">:</span> <span class="Identifier">untyped</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">untyped</span></pre></dt>
  <dd>
    
    TODO: add some ability to explicitly create formulas of different kinds more easily! Essentially force the type without a check to avoid having to rely on heuristics. Use<ul class="simple"><li><tt class="docutils literal"><span class="pre"><span class="Operator">&lt;-</span></span></tt> for assignment</li>
<li><tt class="docutils literal"><span class="pre"><span class="Operator">&lt;&lt;</span></span></tt> for reduce operations, i.e. scalar proc?</li>
<li><tt class="docutils literal"><span class="pre"><span class="Operator">~</span></span></tt> for vector like proc</li>
<li>formula without any of the above will be considered:<ul class="simple"><li><tt class="docutils literal"><span class="pre"><span class="Identifier">fkVariable</span></span></tt> if no column involved</li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">fkVector</span></span></tt> else</li>
</ul>
</li>
<li><tt class="docutils literal"><span class="pre"><span class="Operator">&lt;</span><span class="Keyword">type</span><span class="Operator">&gt;:</span> <span class="Operator">&lt;</span><span class="Identifier">actualFormula</span><span class="Operator">&gt;</span></span></tt>: simple type hint for tensors in closure</li>
<li><tt class="docutils literal"><span class="pre"><span class="Operator">&lt;</span><span class="Keyword">type</span><span class="Operator">&gt;</span> <span class="Operator">-&gt;</span> <span class="Operator">&lt;</span><span class="Identifier">resType</span><span class="Operator">&gt;:</span> <span class="Operator">&lt;</span><span class="Identifier">actualFormula</span><span class="Operator">&gt;</span></span></tt>: full type for closure. <tt class="docutils literal"><span class="pre"><span class="Operator">&lt;</span><span class="Keyword">type</span><span class="Operator">&gt;</span></span></tt> is the dtype used for tensors, <tt class="docutils literal"><span class="pre"><span class="Operator">&lt;</span><span class="Identifier">resType</span><span class="Operator">&gt;</span></span></tt> the resulting type</li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">df</span><span class="Punctuation">[</span><span class="Operator">&lt;</span><span class="Identifier">someIdent</span><span class="Operator">/</span><span class="Identifier">Sym</span><span class="Operator">&gt;</span><span class="Punctuation">]</span></span></tt>: to access columns using identifiers / symbols defined in the scope</li>
<li><tt class="docutils literal"><span class="pre"><span class="Identifier">idx</span></span></tt>: can be used to access the loop iteration index</li>
</ul>

    <a href="https://github.com/SciNim/datamancer/tree/master/src/datamancer/formula.nim#L1300" class="link-seesrc" target="_blank">Source</a>&nbsp;&nbsp;
<a href="https://github.com/SciNim/datamancer/edit/master/src/datamancer/formula.nim#L1300" class="link-seesrc" target="_blank" >Edit</a>&nbsp;&nbsp;

  </dd>
</div>

</div>

  </dl>
</div>
<div class="section" id="19">
  <h1><a class="toc-backref" href="#19">Exports</a></h1>
  <dl class="item">
    <a href="formulaNameMacro.html#buildName,NimNode"><span class="Identifier">buildName</span></a>, <a href="formulaNameMacro.html#buildResultColName,NimNode"><span class="Identifier">buildResultColName</span></a>, <a href="formulaExp.html#isValidType,NimNode"><span class="Identifier">isValidType</span></a>, <a href="formulaExp.html#AssignKind"><span class="Identifier">AssignKind</span></a>, <a href="formulaExp.html#nodeIsDfIdx,NimNode"><span class="Identifier">nodeIsDfIdx</span></a>, <a href="formulaExp.html#DtypeOrderMap"><span class="Identifier">DtypeOrderMap</span></a>, <a href="formulaExp.html#hasExplicitTypeHint,NimNode"><span class="Identifier">hasExplicitTypeHint</span></a>, <a href="formulaExp.html#DtypesAll"><span class="Identifier">DtypesAll</span></a>, <a href="formulaExp.html#HeuristicType"><span class="Identifier">HeuristicType</span></a>, <a href="formulaExp.html#FormulaKind"><span class="Identifier">FormulaKind</span></a>, <a href="formulaExp.html#fkAssign"><span class="Identifier">fkAssign</span></a>, <a href="formulaExp.html#fkVector"><span class="Identifier">fkVector</span></a>, <a href="formulaExp.html#parsePreface,NimNode"><span class="Identifier">parsePreface</span></a>, <a href="formulaExp.html#Lift"><span class="Identifier">Lift</span></a>, <a href="formulaExp.html#nodeIsDf,NimNode"><span class="Identifier">nodeIsDf</span></a>, <a href="formulaExp.html#toStrType,NimNode"><span class="Identifier">toStrType</span></a>, <a href="formulaExp.html#Assign"><span class="Identifier">Assign</span></a>, <a href="formulaExp.html#FormulaCT"><span class="Identifier">FormulaCT</span></a>, <a href="formulaExp.html#Dtypes"><span class="Identifier">Dtypes</span></a>, <a href="formulaExp.html#fkScalar"><span class="Identifier">fkScalar</span></a>, <a href="formulaExp.html#extractCall,NimNode,string"><span class="Identifier">extractCall</span></a>, <a href="formulaExp.html#isColumnType,NimNode"><span class="Identifier">isColumnType</span></a>, <a href="formulaExp.html#fkVariable"><span class="Identifier">fkVariable</span></a>, <a href="formulaExp.html#Preface"><span class="Identifier">Preface</span></a>, <a href="formulaExp.html#sortTypes,seq[string]"><span class="Identifier">sortTypes</span></a>, <a href="formulaExp.html#sortTypes,seq[NimNode]"><span class="Identifier">sortTypes</span></a>, <a href="formulaExp.html#TypeHint"><span class="Identifier">TypeHint</span></a>, <a href="formulaExp.html#generateClosure,FormulaCT"><span class="Identifier">generateClosure</span></a>, <a href="formulaExp.html#fkNone"><span class="Identifier">fkNone</span></a>, <a href="formulaExp.html#FormulaTypes"><span class="Identifier">FormulaTypes</span></a>, <a href="formulaExp.html#$,Preface"><span class="Identifier">$</span></a>
  </dl>
</div>

  </div>
</div>

      <div class="twelve-columns footer">
        <span class="nim-sprite"></span>
        <br>
        <small style="color: var(--hint);">Made with Nim. Generated: 2022-07-28 17:16:03 UTC</small>
      </div>
    </div>
  </div>
  
</body>
</html>
